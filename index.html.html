<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§ˆì¸ë“œì…‹ ìê°€ì§„ë‹¨ ì„¤ë¬¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Noto Sans KR', Arial, sans-serif;
            background: linear-gradient(135deg, #24278B 0%, #1e2177 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #24278B 0%, #1e2177 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        .survey-container {
            padding: 40px;
        }
        .welcome-screen {
            text-align: center;
        }
        .welcome-screen h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }
        .welcome-screen p {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        .name-input-container {
            margin: 30px 0;
        }
        .name-input-container label {
            display: block;
            margin-bottom: 10px;
            color: #333;
            font-weight: 600;
        }
        .name-input-container input {
            width: 100%;
            max-width: 300px;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 20px;
        }
        .name-input-container input:focus {
            outline: none;
            border-color: #24278B;
        }
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #24278B 0%, #1e2177 100%);
            color: white;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(36, 39, 139, 0.3);
        }
        .btn-secondary {
            background: #f8f9fa;
            color: #666;
            border: 2px solid #e1e5e9;
        }
        .btn-secondary:hover {
            background: #e9ecef;
            border-color: #ced4da;
        }
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        .question-container {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .progress-bar {
            background: #e1e5e9;
            height: 8px;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        .progress-fill {
            background: linear-gradient(135deg, #24278B 0%, #1e2177 100%);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 4px;
            width: 0%;
        }
        .question {
            margin-bottom: 40px;
        }
        .question-header {
            background: #f8f9ff;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #24278B;
        }
        .question-number {
            color: #24278B;
            font-weight: bold;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        .question-text {
            font-size: 1.1rem;
            color: #333;
            margin-bottom: 10px;
            font-weight: 600;
        }
        .question-scenario {
            font-size: 1rem;
            color: #666;
            font-style: italic;
            line-height: 1.5;
        }
        .options {
            display: grid;
            gap: 15px;
        }
        .option {
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .option:hover {
            border-color: #24278B;
            background: #f8f9ff;
            transform: translateX(5px);
        }
        .option.selected {
            border-color: #24278B;
            background: linear-gradient(135deg, #24278B 0%, #1e2177 100%);
            color: white;
            transform: translateX(5px);
        }
        .option-label {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 1rem;
        }
        .option-text {
            font-size: 0.95rem;
            line-height: 1.4;
        }
        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid #e1e5e9;
        }
        .result-container {
            display: none;
            text-align: center;
            animation: fadeIn 0.5s ease-in;
        }
        .result-score {
            font-size: 4rem;
            font-weight: bold;
            color: #24278B;
            margin-bottom: 20px;
        }
        .result-category {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 30px;
            font-weight: 600;
        }
        .result-description {
            background: #f8f9ff;
            padding: 30px;
            border-radius: 15px;
            text-align: left;
            margin-bottom: 30px;
            border-left: 5px solid #24278B;
        }
        .result-description h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        .result-description p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        .result-tips {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        .result-tips h4 {
            color: #856404;
            margin-bottom: 10px;
        }
        .result-tips ul {
            color: #856404;
            margin-left: 20px;
        }
        .result-tips li {
            margin-bottom: 5px;
        }
        .aggregate-section {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9ff;
            border-radius: 15px;
            border-left: 5px solid #24278B;
        }
        .aggregate-section h3 {
            color: #24278B;
            margin-bottom: 15px;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #24278B;
        }
        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }
        .distribution-chart {
            margin-top: 20px;
        }
        .chart-bar {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .chart-label {
            width: 120px;
            font-size: 0.9rem;
            color: #666;
        }
        .chart-bar-fill {
            height: 20px;
            background: linear-gradient(135deg, #24278B 0%, #1e2177 100%);
            border-radius: 10px;
            margin-right: 10px;
            transition: width 0.5s ease;
        }
        .chart-value {
            font-size: 0.9rem;
            font-weight: bold;
            color: #24278B;
        }
        .instructor-panel {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        .instructor-toggle {
            background: #24278B;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.9rem;
            box-shadow: 0 4px 12px rgba(36, 39, 139, 0.3);
        }
        .instructor-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1001;
        }
        .modal-content {
            background: white;
            margin: 50px auto;
            padding: 30px;
            border-radius: 15px;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }
        .close-modal {
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #aaa;
        }
        .close-modal:hover {
            color: #000;
        }
        .participant-list {
            margin-top: 20px;
        }
        .participant-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin-bottom: 8px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #24278B;
        }
        .participant-name {
            font-weight: 600;
            color: #333;
        }
        .participant-score {
            color: #24278B;
            font-weight: bold;
        }
        .participant-level {
            font-size: 0.8rem;
            color: #666;
        }
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            .survey-container {
                padding: 20px;
            }
            .controls {
                flex-direction: column;
                gap: 15px;
            }
            .btn {
                width: 100%;
            }
            .modal-content {
                margin: 20px;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§  ë§ˆì¸ë“œì…‹ ìê°€ì§„ë‹¨</h1>
            <p>ë‚˜ì˜ ì„±ì¥ ë§ˆì¸ë“œì…‹ê³¼ ê³ ì • ë§ˆì¸ë“œì…‹ ê²½í–¥ì„ ì•Œì•„ë³´ì„¸ìš”</p>
        </div>

        <div class="survey-container">
            <div class="welcome-screen" id="welcomeScreen">
                <h2>ğŸ“ ì„¤ë¬¸ ì•ˆë‚´</h2>
                <p>ì´ ì„¤ë¬¸ì€ ìºëŸ´ ë“œì›©(Carol Dweck)ì˜ ë§ˆì¸ë“œì…‹ ì´ë¡ ì„ ë°”íƒ•ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                <p>ì´ 20ê°œì˜ ì§ˆë¬¸ì„ í†µí•´ í˜„ì¬ ë‹¹ì‹ ì˜ ë§ˆì¸ë“œì…‹ ê²½í–¥ì„ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                <p><strong>ì˜ˆìƒ ì†Œìš”ì‹œê°„: ì•½ 5-7ë¶„</strong></p>
                <p>ê° ìƒí™©ì—ì„œ ê°€ì¥ ì†”ì§í•˜ê²Œ ëŠë¼ëŠ” ë°”ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
                
                <div class="name-input-container">
                    <label for="participantName">ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”:</label>
                    <input type="text" id="participantName" placeholder="í™ê¸¸ë™" required>
                </div>
                
                <button class="btn" onclick="startSurvey()">ì„¤ë¬¸ ì‹œì‘í•˜ê¸°</button>
            </div>

            <div class="question-container" id="questionContainer">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                
                <div class="question" id="questionElement">
                </div>

                <div class="controls">
                    <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()" disabled>ì´ì „</button>
                    <button class="btn" id="nextBtn" onclick="nextQuestion()" disabled>ë‹¤ìŒ</button>
                </div>
            </div>

            <div class="result-container" id="resultContainer">
                <div class="result-score" id="resultScore"></div>
                <div class="result-category" id="resultCategory"></div>
                <div class="result-description" id="resultDescription"></div>
                
                <div class="aggregate-section" id="aggregateSection">
                    <h3>ğŸ“Š ì „ì²´ ì°¸ê°€ì ê²°ê³¼</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalParticipants">0</div>
                            <div class="stat-label">ì´ ì°¸ê°€ì</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="averageScore">0.0</div>
                            <div class="stat-label">í‰ê·  ì ìˆ˜</div>
                        </div>
                    </div>
                    
                    <div class="distribution-chart">
                        <h4>ë§ˆì¸ë“œì…‹ ë¶„í¬</h4>
                        <div id="distributionBars"></div>
                    </div>
                </div>
                
                <button class="btn" onclick="restartSurvey()">ë‹¤ì‹œ ê²€ì‚¬í•˜ê¸°</button>
            </div>
        </div>
        
        <div class="instructor-panel" id="instructorPanel">
            <button class="instructor-toggle" onclick="toggleInstructorModal()">ğŸ‘¨â€ğŸ« ê°•ì‚¬ìš©</button>
        </div>
        
        <div class="instructor-modal" id="instructorModal">
            <div class="modal-content">
                <span class="close-modal" onclick="toggleInstructorModal()">&times;</span>
                <h2>ê°•ì‚¬ìš© ëŒ€ì‹œë³´ë“œ</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="modalTotalParticipants">0</div>
                        <div class="stat-label">ì´ ì‘ë‹µì</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="modalAverageScore">0.0</div>
                        <div class="stat-label">í‰ê·  ì ìˆ˜</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="modalHighestScore">0</div>
                        <div class="stat-label">ìµœê³  ì ìˆ˜</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="modalLowestScore">0</div>
                        <div class="stat-label">ìµœì € ì ìˆ˜</div>
                    </div>
                </div>
                
                <div class="distribution-chart">
                    <h4>ìƒì„¸ ë¶„í¬</h4>
                    <div id="modalDistributionBars"></div>
                </div>
                
                <div class="participant-list">
                    <h4>ê°œë³„ ì°¸ê°€ì ê²°ê³¼</h4>
                    <div id="participantResults"></div>
                </div>
                
                <div style="margin-top: 20px;">
                    <button class="btn" onclick="exportResults()">ê²°ê³¼ ë‚´ë³´ë‚´ê¸°</button>
                    <button class="btn btn-secondary" onclick="clearAllData()">ë°ì´í„° ì´ˆê¸°í™”</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let currentQuestion = 0;
        let answers = [];
        let totalScore = 0;
        let participantName = '';
        let allResults = JSON.parse(localStorage.getItem('surveyResults') || '[]');

        // ì„¤ë¬¸ ë°ì´í„° (20ê°œ ì§ˆë¬¸)
        const questions = [
            {
                category: "í•™ìŠµê³¼ ë„ì „",
                scenario: "íšŒì‚¬ì—ì„œ ìƒˆë¡œìš´ ì†Œí”„íŠ¸ì›¨ì–´ ë„ì…ìœ¼ë¡œ êµìœ¡ì„ ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.",
                question: "ìƒˆë¡œìš´ ê¸°ìˆ ì„ ë°°ìš¸ ë•Œ ì–´ë–¤ ìƒê°ì´ ë“œë‚˜ìš”?",
                options: [
                    { label: "A", text: "ì´ëŸ° ìƒí™©ì´ ìŠ¤íŠ¸ë ˆìŠ¤ë¡œ ëŠê»´ì§„ë‹¤", score: 0 },
                    { label: "B", text: "ìƒˆë¡œìš´ ê²ƒì„ ë°°ìš°ëŠ” ê²ƒì´ í¥ë¯¸ë¡­ë‹¤", score: 2 },
                    { label: "C", text: "ë‹¤ë¥¸ ì‚¬ëŒë“¤ë³´ë‹¤ ëŠ¦ê²Œ ë°°ìš¸ê¹Œë´ ê±±ì •ëœë‹¤", score: 0 },
                    { label: "D", text: "ì–´ë ¤ì›Œë„ ì‹œê°„ì„ ë“¤ì´ë©´ ìµí ìˆ˜ ìˆë‹¤ê³  ìƒê°í•œë‹¤", score: 2 }
                ]
            },
            {
                category: "í•™ìŠµê³¼ ë„ì „",
                scenario: "ì—…ë¬´ ì¤‘ ì „ì— í•´ë³¸ ì  ì—†ëŠ” ë³µì¡í•œ ë¬¸ì œê°€ ìƒê²¼ìŠµë‹ˆë‹¤.",
                question: "ë³µì¡í•œ ë¬¸ì œë¥¼ í•´ê²°í•´ì•¼ í•  ë•Œ ì–´ë–»ê²Œ ì ‘ê·¼í•˜ë‚˜ìš”?",
                options: [
                    { label: "A", text: "ì´ëŸ° ë¬¸ì œëŠ” ê²½í—˜ ìˆëŠ” ì‚¬ëŒì´ í•´ê²°í•´ì•¼ í•œë‹¤ê³  ìƒê°í•œë‹¤", score: 0 },
                    { label: "B", text: "ì—¬ëŸ¬ ë°©ë²•ì„ ì‹œë„í•´ë³´ë©° í•´ê²°ì±…ì„ ì°¾ìœ¼ë ¤ í•œë‹¤", score: 2 },
                    { label: "C", text: "ë¹¨ë¦¬ í•´ê²°í•˜ì§€ ëª»í•˜ë©´ ëŠ¥ë ¥ì´ ë¶€ì¡±í•˜ë‹¤ê³  ëŠë‚€ë‹¤", score: 0 },
                    { label: "D", text: "ì‹œê°„ì´ ê±¸ë¦¬ë”ë¼ë„ ë°°ìš°ë©´ì„œ í•´ê²°í•  ìˆ˜ ìˆë‹¤ê³  ë³¸ë‹¤", score: 2 }
                ]
            },
            {
                category: "í•™ìŠµê³¼ ë„ì „",
                scenario: "ë¶„ì•¼ ì „ë¬¸ê°€ê°€ ë‹¹ì‹ ì˜ í˜„ì¬ ìˆ˜ì¤€ì— ëŒ€í•´ ì†”ì§í•œ í‰ê°€ë¥¼ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.",
                question: "ì „ë¬¸ê°€ì˜ í”¼ë“œë°±ì„ ë°›ì„ ë•Œ ì–´ë–»ê²Œ ë°˜ì‘í•˜ë‚˜ìš”?",
                options: [
                    { label: "A", text: "ë¹„íŒì ì¸ í”¼ë“œë°±ì€ ë°›ì•„ë“¤ì´ê¸° ì–´ë µë‹¤", score: 0 },
                    { label: "B", text: "êµ¬ì²´ì ì¸ ê°œì„  ë°©í–¥ì„ ì•Œë ¤ì£¼ë©´ ë„ì›€ì´ ëœë‹¤", score: 2 },
                    { label: "C", text: "í‰ê°€ ê²°ê³¼ê°€ ë‚´ ëŠ¥ë ¥ì„ ë³´ì—¬ì¤€ë‹¤ê³  ìƒê°í•œë‹¤", score: 0 },
                    { label: "D", text: "í”¼ë“œë°±ì„ í†µí•´ ë” ë‚˜ì•„ì§ˆ ìˆ˜ ìˆë‹¤ê³  ë³¸ë‹¤", score: 2 }
                ]
            },
            {
                category: "í•™ìŠµê³¼ ë„ì „",
                scenario: "ê´€ì‹¬ì€ ìˆì§€ë§Œ ì™„ì „íˆ ìƒˆë¡œìš´ ë¶„ì•¼ì˜ ì±…ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.",
                question: "ì´ ì±…ì„ ë³´ê³  ì–´ë–¤ ìƒê°ì´ ë“œë‚˜ìš”?",
                options: [
                    { label: "A", text: "ë‚´ ë¶„ì•¼ê°€ ì•„ë‹ˆë¼ì„œ êµ³ì´ ì½ì„ í•„ìš”ëŠ” ì—†ë‹¤ê³  ìƒê°í•œë‹¤", score: 0 },
                    { label: "B", text: "ìƒˆë¡œìš´ ì§€ì‹ì„ ì–»ì„ ìˆ˜ ìˆëŠ” ì¢‹ì€ ê¸°íšŒë¼ê³  ìƒê°í•œë‹¤", score: 2 },
                    { label: "C", text: "ì½ì–´ë„ ì´í•´í•˜ì§€ ëª»í•  ê²ƒ ê°™ì•„ ë§ì„¤ì—¬ì§„ë‹¤", score: 0 },
                    { label: "D", text: "ì–´ë ¤ìš´ ë‚´ìš©ì´ë¼ë„ ë‚˜ì˜ ì‹œì•¼ë¥¼ ë„“í˜€ì¤„ ê²ƒì´ë¼ê³  ë¯¿ëŠ”ë‹¤", score: 2 }
                ]
            },
            {
                category: "ì‹¤íŒ¨ì™€ ì¢Œì ˆ",
                scenario: "ëª‡ ë‹¬ê°„ ì¤€ë¹„í•œ ì¤‘ìš”í•œ í”„ë¡œì íŠ¸ê°€ ê¸°ëŒ€í–ˆë˜ ê²°ê³¼ë¥¼ ì–»ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.",
                question: "í”„ë¡œì íŠ¸ê°€ ì‹¤íŒ¨í–ˆì„ ë•Œ ì–´ë–»ê²Œ ìƒê°í•˜ë‚˜ìš”?",
                options: [
                    { label: "A", text: "ë‚´ê°€ ì´ëŸ° ì¼ì— ì í•©í•˜ì§€ ì•Šë‹¤ê³  ìƒê°í•œë‹¤", score: 0 },
                    { label: "B", text: "ë‹¤ìŒë²ˆì—ëŠ” ë‹¤ë¥¸ ë°©ë²•ì„ ì‹œë„í•´ë³´ê³  ì‹¶ë‹¤", score: 2 },
                    { label: "C", text: "ì‹¤íŒ¨í•œ ê²ƒì´ ë¶€ë„ëŸ½ê³  ë‹¤ë¥¸ ì‚¬ëŒë“¤ì´ ì–´ë–»ê²Œ ë³¼ê¹Œ ê±±ì •ëœë‹¤", score: 0 },
                    { label: "D", text: "ì‹¤íŒ¨ì—ì„œ ë°°ìš´ ê²ƒë“¤ì´ ë‹¤ìŒì— ë„ì›€ì´ ë  ê²ƒì´ë‹¤", score: 2 }
                ]
            },
            {
                category: "ì‹¤íŒ¨ì™€ ì¢Œì ˆ",
                scenario: "ë¹„ìŠ·í•œ ì‹¤ìˆ˜ë¥¼ ë˜ í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.",
                question: "ë°˜ë³µë˜ëŠ” ì‹¤ìˆ˜ë¥¼ í•  ë•Œ ì–´ë–»ê²Œ ë°˜ì‘í•˜ë‚˜ìš”?",
                options: [
                    { label: "A", text: "ë‚˜ëŠ” ì´ëŸ° ë¶€ë¶„ì—ì„œ í•­ìƒ ì‹¤ìˆ˜í•œë‹¤", score: 0 },
                    { label: "B", text: "ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œì„ ë§Œë“¤ì–´ì•¼ê² ë‹¤", score: 2 },
                    { label: "C", text: "ê°™ì€ ì‹¤ìˆ˜ë¥¼ ë°˜ë³µí•˜ëŠ” ê²ƒì´ ì°½í”¼í•˜ë‹¤", score: 0 },
                    { label: "D", text: "ì‹¤ìˆ˜ë¥¼ í†µí•´ ë” í™•ì‹¤íˆ ë°°ìš¸ ìˆ˜ ìˆë‹¤", score: 2 }
                ]
            },
            {
                category: "ì‹¤íŒ¨ì™€ ì¢Œì ˆ",
                scenario: "ì˜¬í•´ ì´ˆì— ì„¸ì› ë˜ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.",
                question: "ëª©í‘œë¥¼ ë‹¬ì„±í•˜ì§€ ëª»í–ˆì„ ë•Œ ì–´ë–»ê²Œ í•´ì„í•˜ë‚˜ìš”?",
                options: [
                    { label: "A", text: "ì²˜ìŒë¶€í„° ë‚´ê²ŒëŠ” ë¬´ë¦¬í•œ ëª©í‘œì˜€ë‹¤", score: 0 },
                    { label: "B", text: "ëª©í‘œ ë‹¬ì„± ë°©ë²•ì„ ë‹¤ì‹œ ìƒê°í•´ë´ì•¼ê² ë‹¤", score: 2 },
                    { label: "C", text: "ëª©í‘œë¥¼ ë‹¬ì„±í•˜ì§€ ëª»í•œ ê²ƒì´ ì‹¤ë§ìŠ¤ëŸ½ë‹¤", score: 0 },
                    { label: "D", text: "ëª©í‘œë¥¼ í–¥í•´ ë…¸ë ¥í•œ ê³¼ì •ì—ì„œ ì„±ì¥í–ˆë‹¤", score: 2 }
                ]
            },
            {
                category: "ì‹¤íŒ¨ì™€ ì¢Œì ˆ",
                scenario: "ë‹¹ì‹ ì˜ ì˜ê²¬ì´ íšŒì˜ì—ì„œ ë°›ì•„ë“¤ì—¬ì§€ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.",
                question: "ì´ ìƒí™©ì—ì„œ ì–´ë–¤ ê¸°ë¶„ì´ ë“œë‚˜ìš”?",
                options: [
                    { label: "A", text: "ë‚´ ì•„ì´ë””ì–´ê°€ ë³„ë¡œì˜€ë‹¤ê³  ìƒê°í•˜ë©° ìœ„ì¶•ëœë‹¤", score: 0 },
                    { label: "B", text: "ë‚´ ì˜ê²¬ì˜ ì–´ë–¤ ì ì´ ë¶€ì¡±í–ˆëŠ”ì§€ ë¶„ì„í•´ë³¸ë‹¤", score: 2 },
                    { label: "C", text: "ë‹¤ì‹œëŠ” ì˜ê²¬ì„ ë‚´ê³  ì‹¶ì§€ ì•Šë‹¤ëŠ” ìƒê°ì´ ë“ ë‹¤", score: 0 },
                    { label: "D", text: "ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ê´€ì ì„ ì´í•´í•  ìˆ˜ ìˆëŠ” ê¸°íšŒì˜€ë‹¤ê³  ìƒê°í•œë‹¤", score: 2 }
                ]
            },
            {
                category: "ì„±ê³µê³¼ ì¹­ì°¬",
                scenario: "ì–´ë ¤ì›Œ ë³´ì˜€ë˜ ì¼ì„ ì˜ˆìƒë³´ë‹¤ í›¨ì”¬ ì˜ í•´ëƒˆìŠµë‹ˆë‹¤.",
                question: "ì˜ˆìƒì¹˜ ëª»í•œ ì„±ê³µì„ ê±°ë’€ì„ ë•Œ ì–´ë–»ê²Œ ìƒê°í•˜ë‚˜ìš”?",
                options: [
                    { label: "A", text: "ì´ë²ˆì—ëŠ” ìš´ì´ ì¢‹ì•˜ë‹¤", score: 0 },
                    { label: "B", text: "ë…¸ë ¥í•œ ë§Œí¼ ê²°ê³¼ê°€ ë‚˜ì™”ë‹¤", score: 2 },
                    { label: "C", text: "ë‹¤ìŒì—ë„ ì´ëŸ° ì„±ê³¼ë¥¼ ë‚¼ ìˆ˜ ìˆì„ì§€ ê±±ì •ëœë‹¤", score: 0 },
                    { label: "D", text: "ì´ëŸ° ì„±ê³µì´ ë” í° ë„ì „ì— ëŒ€í•œ ìì‹ ê°ì„ ì¤€ë‹¤", score: 2 }
                ]
            },
            {
                category: "ì„±ê³µê³¼ ì¹­ì°¬",
                scenario: "ë™ë£Œê°€ ë‹¹ì‹ ì„ ë³´ê³  'ì •ë§ ë˜‘ë˜‘í•˜ë‹¤'ê³  ë§í–ˆìŠµë‹ˆë‹¤.",
                question: "ëŠ¥ë ¥ì— ëŒ€í•œ ì¹­ì°¬ì„ ë°›ì„ ë•Œ ì–´ë–»ê²Œ ë°›ì•„ë“¤ì´ë‚˜ìš”?",
                options: [
                    { label: "A", text: "ì´ëŸ° ì¹­ì°¬ì„ ë“¤ìœ¼ë©´ ê¸°ë¶„ì´ ì¢‹ë‹¤", score: 0 },
                    { label: "B", text: "ì—´ì‹¬íˆ ë…¸ë ¥í•œ ê²°ê³¼ë¼ê³  ìƒê°í•œë‹¤", score: 2 },
                    { label: "C", text: "ì•ìœ¼ë¡œë„ ì´ëŸ° í‰ê°€ë¥¼ ë°›ì„ ìˆ˜ ìˆì„ì§€ ë¶€ë‹´ìŠ¤ëŸ½ë‹¤", score: 0 },
                    { label: "D", text: "ì¹­ì°¬ì´ ë” ì—´ì‹¬íˆ í•˜ë ¤ëŠ” ë™ê¸°ê°€ ëœë‹¤", score: 2 }
                ]
            },
            {
                category: "ì„±ê³µê³¼ ì¹­ì°¬",
                scenario: "ê°™ì´ ì‹œì‘í•œ ë™ë£Œë“¤ë³´ë‹¤ ë¹ ë¥´ê²Œ ì„±ê³¼ë¥¼ ëƒˆìŠµë‹ˆë‹¤.",
                question: "ë¹ ë¥¸ ì„±ê³¼ë¥¼ ë‚¼ ë•Œ ì–´ë–»ê²Œ í•´ì„í•˜ë‚˜ìš”?",
                options: [
                    { label: "A", text: "ë‚˜ëŠ” ì´ëŸ° ì¼ì— ì¬ëŠ¥ì´ ìˆëŠ” ê²ƒ ê°™ë‹¤", score: 0 },
                    { label: "B", text: "ì‚¬ìš©í•œ ë°©ë²•ì´ íš¨ê³¼ì ì´ì—ˆë˜ ê²ƒ ê°™ë‹¤", score: 2 },
                    { label: "C", text: "ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ë¹„êµë˜ëŠ” ê²ƒì´ ë¶€ë‹´ìŠ¤ëŸ½ë‹¤", score: 0 },
                    { label: "D", text: "ì´ ê²½í—˜ì„ í†µí•´ ë” ì–´ë ¤ìš´ ì¼ì—ë„ ë„ì „í•˜ê³  ì‹¶ë‹¤", score: 2 }
                ]
            },
            {
                category: "ì„±ê³µê³¼ ì¹­ì°¬",
                scenario: "ë‹¹ì‹ ì˜ ë…¸ë ¥ì— ëŒ€í•´ ìƒì‚¬ê°€ ê³µê°œì ìœ¼ë¡œ ì¹­ì°¬í–ˆìŠµë‹ˆë‹¤.",
                question: "ë…¸ë ¥ì— ëŒ€í•œ ì¹­ì°¬ì„ ë“¤ì—ˆì„ ë•Œ ì–´ë–¤ ìƒê°ì´ ë“œë‚˜ìš”?",
                options: [
                    { label: "A", text: "ê³¼ë¶„í•œ ì¹­ì°¬ì´ë¼ê³  ìƒê°í•˜ë©° ê²¸ì†í•´ì§„ë‹¤", score: 0 },
                    { label: "B", text: "ë‚˜ì˜ ë…¸ë ¥ì„ ì¸ì •ë°›ì€ ê²ƒ ê°™ì•„ ê¸°ì˜ë‹¤", score: 2 },
                    { label: "C", text: "ì‚¬ëŒë“¤ì˜ ê¸°ëŒ€ì¹˜ê°€ ë†’ì•„ì§ˆê¹Œë´ ê±±ì •ëœë‹¤", score: 0 },
                    { label: "D", text: "ì•ìœ¼ë¡œë„ ê¾¸ì¤€íˆ ë…¸ë ¥í•´ì•¼ê² ë‹¤ëŠ” ë™ê¸°ë¶€ì—¬ê°€ ëœë‹¤", score: 2 }
                ]
            },
            {
                category: "íƒ€ì¸ê³¼ì˜ ë¹„êµ",
                scenario: "ì—…ê³„ì—ì„œ ì¸ì •ë°›ëŠ” ì „ë¬¸ê°€ì™€ í•¨ê»˜ ì¼í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.",
                question: "ë›°ì–´ë‚œ ì‹¤ë ¥ìì™€ ë§Œë‚¬ì„ ë•Œ ì–´ë–»ê²Œ ëŠë¼ë‚˜ìš”?",
                options: [
                    { label: "A", text: "ì‹¤ë ¥ ì°¨ì´ê°€ ë„ˆë¬´ ì»¤ì„œ ìœ„ì¶•ëœë‹¤", score: 0 },
                    { label: "B", text: "ê·¸ ì‚¬ëŒì—ê²Œì„œ ë§ì€ ê²ƒì„ ë°°ìš°ê³  ì‹¶ë‹¤", score: 2 },
                    { label: "C", text: "ë‚´ ë¶€ì¡±í•¨ì´ ë“œëŸ¬ë‚ ê¹Œë´ ê±±ì •ëœë‹¤", score: 0 },
                    { label: "D", text: "ì „ë¬¸ê°€ì™€ ì¼í•˜ë©´ì„œ ë‚˜ë„ ì„±ì¥í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤", score: 2 }
                ]
            },
            {
                category: "íƒ€ì¸ê³¼ì˜ ë¹„êµ",
                scenario: "ëŠ¦ê²Œ ì‹œì‘í•œ í›„ë°°ê°€ ë¹ ë¥´ê²Œ ì„±ì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
                question: "í›„ë°°ê°€ ë¹ ë¥´ê²Œ ì„±ì¥í•  ë•Œ ì–´ë–»ê²Œ ë°˜ì‘í•˜ë‚˜ìš”?",
                options: [
                    { label: "A", text: "ë‚˜ëŠ” ì›ë˜ ë°°ìš°ëŠ” ì†ë„ê°€ ëŠë¦° í¸ì´ë‹¤", score: 0 },
                    { label: "B", text: "ê·¸ í›„ë°°ì˜ í•™ìŠµ ë°©ë²•ì´ ê¶ê¸ˆí•˜ë‹¤", score: 2 },
                    { label: "C", text: "í›„ë°°ì—ê²Œ ë’¤ì²˜ì§€ëŠ” ê²ƒì´ ë¶€ë„ëŸ½ë‹¤", score: 0 },
                    { label: "D", text: "ì„œë¡œ ìê·¹ì„ ì£¼ê³ ë°›ìœ¼ë©° í•¨ê»˜ ì„±ì¥í•  ìˆ˜ ìˆë‹¤", score: 2 }
                ]
            },
            {
                category: "íƒ€ì¸ê³¼ì˜ ë¹„êµ",
                scenario: "ì¹œí•œ ì¹œêµ¬ê°€ ìƒˆë¡œìš´ ì‚¬ì—…ìœ¼ë¡œ í° ì„±ê³µì„ ê±°ë‘ì—ˆìŠµë‹ˆë‹¤.",
                question: "ì¹œêµ¬ì˜ ì„±ê³µ ì†Œì‹ì„ ë“¤ì—ˆì„ ë•Œ ì–´ë–¤ ê¸°ë¶„ì´ ë“œë‚˜ìš”?",
                options: [
                    { label: "A", text: "ë‚˜ ìì‹ ê³¼ ë¹„êµí•˜ë©° ì´ˆì¡°í•´ì§„ë‹¤", score: 0 },
                    { label: "B", text: "ì¹œêµ¬ì˜ ì„±ê³µ ë¹„ê²°ì´ ê¶ê¸ˆí•˜ê³  ë°°ìš°ê³  ì‹¶ë‹¤", score: 2 },
                    { label: "C", text: "ë‚˜ë§Œ ë’¤ì²˜ì§€ëŠ” ê²ƒ ê°™ì€ ëŠë‚Œì´ ë“ ë‹¤", score: 0 },
                    { label: "D", text: "ì¹œêµ¬ì˜ ì„±ê³µì— ì§„ì‹¬ìœ¼ë¡œ ê¸°ë»í•˜ë©° ë‚˜ë„ ì˜ê°ì„ ë°›ëŠ”ë‹¤", score: 2 }
                ]
            },
            {
                category: "íƒ€ì¸ê³¼ì˜ ë¹„êµ",
                scenario: "ë‹¹ì‹ ë³´ë‹¤ ê²½ë ¥ì´ ì§§ì€ ë™ë£Œê°€ ë” ì¢‹ì€ ì•„ì´ë””ì–´ë¥¼ ëƒˆìŠµë‹ˆë‹¤.",
                question: "ì´ ìƒí™©ì—ì„œ ì–´ë–»ê²Œ ë°˜ì‘í•˜ë‚˜ìš”?",
                options: [
                    { label: "A", text: "ìì¡´ì‹¬ì´ ìƒí•˜ê³  ê¸°ë¶„ì´ ì¢‹ì§€ ì•Šë‹¤", score: 0 },
                    { label: "B", text: "ê·¸ ì•„ì´ë””ì–´ì˜ ì¢‹ì€ ì ì„ ë°°ìš°ë ¤ê³  í•œë‹¤", score: 2 },
                    { label: "C", text: "ë‚´ ëŠ¥ë ¥ì´ ë¶€ì¡±í•œ ê²ƒ ê°™ì•„ ë¶ˆì•ˆí•˜ë‹¤", score: 0 },
                    { label: "D", text: "ì¢‹ì€ ì•„ì´ë””ì–´ë¥¼ í†µí•´ íŒ€ ì „ì²´ê°€ ë°œì „í•  ìˆ˜ ìˆì–´ ê¸ì •ì ì´ë‹¤", score: 2 }
                ]
            },
            {
                category: "ë…¸ë ¥ê³¼ ê³¼ì •",
                scenario: "ë§¤ìš° ì–´ë ¤ìš´ ê³¼ì œì— ë§ì€ ì‹œê°„ì„ ìŸì•˜ì§€ë§Œ, ì•„ì§ ê²°ê³¼ê°€ ë³´ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.",
                question: "ê²°ê³¼ê°€ ë³´ì´ì§€ ì•ŠëŠ” ë…¸ë ¥ì„ ê³„ì†í•  ë•Œ ì–´ë–¤ ìƒê°ì´ ë“œë‚˜ìš”?",
                options: [
                    { label: "A", text: "ì´ ë…¸ë ¥ì´ í—›ìˆ˜ê³ ì¼ ìˆ˜ ìˆë‹¤ê³  ìƒê°í•œë‹¤", score: 0 },
                    { label: "B", text: "ê²°ê³¼ê°€ ë‚˜ì˜¤ì§€ ì•Šë”ë¼ë„ ê³¼ì •ì—ì„œ ë°°ìš°ëŠ” ê²ƒì´ ë§ë‹¤ê³  ìƒê°í•œë‹¤", score: 2 },
                    { label: "C", text: "ê²°ê³¼ë¥¼ ë‚´ì§€ ëª»í•˜ë©´ ì‹œê°„ ë‚­ë¹„ë¼ê³  ëŠë‚€ë‹¤", score: 0 },
                    { label: "D", text: "ê¾¸ì¤€íˆ ë…¸ë ¥í•˜ë©´ ê²°êµ­ ëŒíŒŒêµ¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤ê³  ë¯¿ëŠ”ë‹¤", score: 2 }
                ]
            },
            {
                category: "ë…¸ë ¥ê³¼ ê³¼ì •",
                scenario: "ì–´ë–¤ ì‚¬ëŒë“¤ì€ íŠ¹ì • ë¶„ì•¼ì— 'íƒ€ê³ ë‚œ ì¬ëŠ¥'ì´ ìˆë‹¤ê³  ë§í•©ë‹ˆë‹¤.",
                question: "ë‹¹ì‹ ì€ ì¬ëŠ¥ì— ëŒ€í•´ ì–´ë–»ê²Œ ìƒê°í•˜ë‚˜ìš”?",
                options: [
                    { label: "A", text: "ì¬ëŠ¥ì€ íƒœì–´ë‚  ë•Œë¶€í„° ì •í•´ì ¸ ìˆë‹¤ê³  ìƒê°í•œë‹¤", score: 0 },
                    { label: "B", text: "ì¬ëŠ¥ë³´ë‹¤ ê¾¸ì¤€í•œ ë…¸ë ¥ì´ ë” ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•œë‹¤", score: 2 },
                    { label: "C", text: "ì¬ëŠ¥ì´ ì—†ìœ¼ë©´ ì•„ë¬´ë¦¬ ë…¸ë ¥í•´ë„ í•œê³„ê°€ ìˆë‹¤ê³  ìƒê°í•œë‹¤", score: 0 },
                    { label: "D", text: "ë…¸ë ¥ì„ í†µí•´ ì¬ëŠ¥ì„ ê°œë°œí•˜ê³  í‚¤ìš¸ ìˆ˜ ìˆë‹¤ê³  ë¯¿ëŠ”ë‹¤", score: 2 }
                ]
            },
            {
                category: "ë…¸ë ¥ê³¼ ê³¼ì •",
                scenario: "ìƒˆë¡œìš´ ì·¨ë¯¸ë¥¼ ì‹œì‘í–ˆì§€ë§Œ ìƒê°ë³´ë‹¤ ì‹¤ë ¥ì´ ëŠ˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
                question: "ì‹¤ë ¥ í–¥ìƒì´ ë”ë”œ ë•Œ ì–´ë–»ê²Œ ë°˜ì‘í•˜ë‚˜ìš”?",
                options: [
                    { label: "A", text: "ë‚˜ëŠ” ì´ ì·¨ë¯¸ì— ì†Œì§ˆì´ ì—†ë‹¤ê³  ìƒê°í•˜ë©° ì‰½ê²Œ í¬ê¸°í•œë‹¤", score: 0 },
                    { label: "B", text: "ë” íš¨ê³¼ì ì¸ ì—°ìŠµ ë°©ë²•ì„ ì°¾ì•„ë³´ê±°ë‚˜ ì¡°ì–¸ì„ êµ¬í•œë‹¤", score: 2 },
                    { label: "C", text: "ë‹¤ë¥¸ ì‚¬ëŒë“¤ë³´ë‹¤ ëª»í•˜ëŠ” ê²ƒì´ ì°½í”¼í•˜ê²Œ ëŠê»´ì§„ë‹¤", score: 0 },
                    { label: "D", text: "ì‹¤ë ¥ì´ ëŠëŠ” ê³¼ì • ìì²´ë¥¼ ì¦ê¸°ë ¤ê³  ë…¸ë ¥í•œë‹¤", score: 2 }
                ]
            },
            {
                category: "ë…¸ë ¥ê³¼ ê³¼ì •",
                scenario: "ì§€ëŠ¥ì´ë‚˜ ì„±ê²© ê°™ì€ ê¸°ë³¸ì ì¸ ëŠ¥ë ¥ì€ ë³€í•  ìˆ˜ ì—†ë‹¤ê³  ìƒê°í•˜ë‚˜ìš”?",
                question: "ì‚¬ëŒì˜ ê·¼ë³¸ì ì¸ ìì§ˆì— ëŒ€í•œ ë‹¹ì‹ ì˜ ìƒê°ì€?",
                options: [
                    { label: "A", text: "ì‚¬ëŒì€ ì˜ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  ìƒê°í•œë‹¤", score: 0 },
                    { label: "B", text: "ê²½í—˜ê³¼ ë…¸ë ¥ì„ í†µí•´ ì‚¬ëŒì€ ì–¼ë§ˆë“ ì§€ ë³€í•  ìˆ˜ ìˆë‹¤ê³  ìƒê°í•œë‹¤", score: 2 },
                    { label: "C", text: "ë°”ê¾¸ë ¤ëŠ” ë…¸ë ¥ ìì²´ê°€ í˜ë“¤ê³  ì˜ë¯¸ ì—†ë‹¤ê³  ëŠë‚€ë‹¤", score: 0 },
                    { label: "D", text: "ìŠ¤ìŠ¤ë¡œì˜ ì˜ì§€ì— ë”°ë¼ ìì‹ ì˜ ì—­ëŸ‰ì„ í¬ê²Œ ë°œì „ì‹œí‚¬ ìˆ˜ ìˆë‹¤ê³  ë¯¿ëŠ”ë‹¤", score: 2 }
                ]
            }
        ];

        // ì„¤ë¬¸ ì‹œì‘ í•¨ìˆ˜
        function startSurvey() {
            const nameInput = document.getElementById('participantName');
            participantName = nameInput.value.trim();
            
            if (!participantName) {
                alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('questionContainer').style.display = 'block';
            // ê°•ì‚¬ìš© ë²„íŠ¼ ìˆ¨ê¸°ê¸°
            document.getElementById('instructorPanel').style.display = 'none';
            currentQuestion = 0;
            answers = [];
            totalScore = 0;
            showQuestion();
        }

        // ì§ˆë¬¸ í‘œì‹œ í•¨ìˆ˜
        function showQuestion() {
            const question = questions[currentQuestion];
            const questionElement = document.getElementById('questionElement');
            
            questionElement.innerHTML = `
                <div class="question-header">
                    <div class="question-number">ì§ˆë¬¸ ${currentQuestion + 1} / ${questions.length} - ${question.category}</div>
                    <div class="question-text">${question.question}</div>
                    <div class="question-scenario">"${question.scenario}"</div>
                </div>
                <div class="options">
                    ${question.options.map((option, index) => `
                        <div class="option" onclick="selectOption(${index})">
                            <div class="option-label">${option.label}</div>
                            <div class="option-text">${option.text}</div>
                        </div>
                    `).join('')}
                </div>
            `;

            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';

            // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').disabled = answers[currentQuestion] === undefined;
            document.getElementById('nextBtn').textContent = currentQuestion === questions.length - 1 ? 'ê²°ê³¼ ë³´ê¸°' : 'ë‹¤ìŒ';

            // ì´ì „ì— ì„ íƒí•œ ë‹µë³€ì´ ìˆë‹¤ë©´ í‘œì‹œ
            if (answers[currentQuestion] !== undefined) {
                const options = document.querySelectorAll('.option');
                options[answers[currentQuestion]].classList.add('selected');
            }
        }

        // ì˜µì…˜ ì„ íƒ í•¨ìˆ˜
        function selectOption(optionIndex) {
            // ì´ì „ ì„ íƒ ì œê±°
            const options = document.querySelectorAll('.option');
            options.forEach(option => option.classList.remove('selected'));
            
            // ìƒˆ ì„ íƒ ì¶”ê°€
            options[optionIndex].classList.add('selected');
            
            // ë‹µë³€ ì €ì¥
            answers[currentQuestion] = optionIndex;
            
            // ë‹¤ìŒ ë²„íŠ¼ í™œì„±í™”
            document.getElementById('nextBtn').disabled = false;
        }

        // ì´ì „ ì§ˆë¬¸ìœ¼ë¡œ ì´ë™
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        // ë‹¤ìŒ ì§ˆë¬¸ìœ¼ë¡œ ì´ë™
        function nextQuestion() {
            if (answers[currentQuestion] !== undefined) {
                if (currentQuestion < questions.length - 1) {
                    currentQuestion++;
                    showQuestion();
                } else {
                    // ë§ˆì§€ë§‰ ì§ˆë¬¸ì´ë©´ ê²°ê³¼ ê³„ì‚°
                    calculateResult();
                }
            }
        }

        // ê²°ê³¼ ê³„ì‚° í•¨ìˆ˜
        function calculateResult() {
            totalScore = 0;
            for (let i = 0; i < questions.length; i++) {
                const selectedOption = answers[i];
                totalScore += questions[i].options[selectedOption].score;
            }

            // ê²°ê³¼ë¥¼ ì €ì¥
            const result = {
                name: participantName,
                score: totalScore,
                maxScore: questions.length * 2,
                percentage: Math.round((totalScore / (questions.length * 2)) * 100),
                timestamp: new Date().toISOString(),
                answers: answers
            };
            
            allResults.push(result);
            localStorage.setItem('surveyResults', JSON.stringify(allResults));

            showResult();
        }

        // ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
        function showResult() {
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('resultContainer').style.display = 'block';
            // ê°•ì‚¬ìš© ë²„íŠ¼ ë‹¤ì‹œ ë³´ì´ê¸°
            document.getElementById('instructorPanel').style.display = 'block';

            // ê°œì¸ ê²°ê³¼ ë¶„ì„
            let category, description;
            const maxScore = questions.length * 2;
            const percentage = Math.round((totalScore / maxScore) * 100);

            if (totalScore >= 30) {
                category = "ğŸŒŸ ê°•í•œ ì„±ì¥ ë§ˆì¸ë“œì…‹";
                description = `
                    <h3>ì¶•í•˜í•©ë‹ˆë‹¤! ë‹¹ì‹ ì€ ê°•í•œ ì„±ì¥ ë§ˆì¸ë“œì…‹ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.</h3>
                    <p>ë„ì „ì„ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³ , ì‹¤íŒ¨ë¥¼ í•™ìŠµì˜ ê¸°íšŒë¡œ ë°›ì•„ë“¤ì´ë©°, ì§€ì†ì ì¸ ë…¸ë ¥ì„ í†µí•´ ì„±ì¥í•  ìˆ˜ ìˆë‹¤ê³  ë¯¿ìŠµë‹ˆë‹¤.</p>
                    <div class="result-tips">
                        <h4>ğŸ’¡ ë” ë°œì „í•˜ê¸° ìœ„í•œ íŒ:</h4>
                        <ul>
                            <li>ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ì„±ì¥ ë§ˆì¸ë“œì…‹ì„ ê³µìœ í•˜ê³  ê²©ë ¤í•˜ê¸°</li>
                            <li>ë” í° ë„ì „ì— ë„ì „í•´ë³´ê¸°</li>
                            <li>ë©˜í† ë§ì„ í†µí•´ ë‹¤ë¥¸ ì‚¬ëŒì˜ ì„±ì¥ ë•ê¸°</li>
                        </ul>
                    </div>
                `;
            } else if (totalScore >= 20) {
                category = "ğŸ“ˆ ì„±ì¥ ë§ˆì¸ë“œì…‹ ê²½í–¥";
                description = `
                    <h3>ì¢‹ìŠµë‹ˆë‹¤! ë‹¹ì‹ ì€ ì„±ì¥ ë§ˆì¸ë“œì…‹ì„ ì§€í–¥í•˜ê³  ìˆìŠµë‹ˆë‹¤.</h3>
                    <p>ëŒ€ë¶€ë¶„ì˜ ìƒí™©ì—ì„œ ì„±ì¥ê³¼ í•™ìŠµì„ ì¤‘ì‹œí•˜ì§€ë§Œ, ë•Œë•Œë¡œ ê³ ì •ëœ ì‚¬ê³ ì— ë¹ ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    <div class="result-tips">
                        <h4>ğŸ’¡ ì„±ì¥ ë§ˆì¸ë“œì…‹ ê°•í™” íŒ:</h4>
                        <ul>
                            <li>ì‹¤íŒ¨ë‚˜ ì–´ë ¤ì›€ì„ ë§ˆì£¼í•  ë•Œ "ì•„ì§ì€" ì´ë¼ëŠ” ë§ ì¶”ê°€í•˜ê¸°</li>
                            <li>ê³¼ì •ê³¼ ë…¸ë ¥ì— ì´ˆì ì„ ë§ì¶˜ ìê¸° ëŒ€í™”í•˜ê¸°</li>
                            <li>ë‹¤ì–‘í•œ ë„ì „ì— ì˜ë„ì ìœ¼ë¡œ ë…¸ì¶œë˜ê¸°</li>
                        </ul>
                    </div>
                `;
            } else if (totalScore >= 10) {
                category = "âš–ï¸ í˜¼í•©í˜• ë§ˆì¸ë“œì…‹";
                description = `
                    <h3>ë‹¹ì‹ ì€ ìƒí™©ì— ë”°ë¼ ë‹¤ë¥¸ ë§ˆì¸ë“œì…‹ì„ ë³´ì…ë‹ˆë‹¤.</h3>
                    <p>ì–´ë–¤ ì˜ì—­ì—ì„œëŠ” ì„±ì¥ ì§€í–¥ì ì´ì§€ë§Œ, ë‹¤ë¥¸ ì˜ì—­ì—ì„œëŠ” ê³ ì •ëœ ìƒê°ì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    <div class="result-tips">
                        <h4>ğŸ’¡ ê· í˜• ì¡íŒ ë§ˆì¸ë“œì…‹ ê°œë°œ íŒ:</h4>
                        <ul>
                            <li>ê³ ì • ë§ˆì¸ë“œì…‹ì´ ë‚˜íƒ€ë‚˜ëŠ” íŠ¹ì • ìƒí™© íŒŒì•…í•˜ê¸°</li>
                            <li>"ë‚˜ëŠ” í•  ìˆ˜ ì—†ì–´" ëŒ€ì‹  "ì•„ì§ í•  ìˆ˜ ì—†ì–´" ë§í•˜ê¸°</li>
                            <li>ì‘ì€ ë„ì „ë¶€í„° ì‹œì‘í•´ì„œ ì„±ê³µ ê²½í—˜ ìŒ“ê¸°</li>
                        </ul>
                    </div>
                `;
            } else {
                category = "ğŸ”’ ê³ ì • ë§ˆì¸ë“œì…‹ ê²½í–¥";
                description = `
                    <h3>í˜„ì¬ ê³ ì • ë§ˆì¸ë“œì…‹ ê²½í–¥ì„ ë³´ì´ê³  ìˆìŠµë‹ˆë‹¤.</h3>
                    <p>ëŠ¥ë ¥ì´ ê³ ì •ë˜ì–´ ìˆë‹¤ê³  ë¯¿ê³ , ì‹¤íŒ¨ë¥¼ ê°œì¸ì  í•œê³„ë¡œ í•´ì„í•˜ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.</p>
                    <div class="result-tips">
                        <h4>ğŸ’¡ ë§ˆì¸ë“œì…‹ ì „í™˜ ì‹œì‘ íŒ:</h4>
                        <ul>
                            <li>ë‡Œê³¼í•™ì— ëŒ€í•´ í•™ìŠµí•˜ê¸° (ë‡Œì˜ ê°€ì†Œì„±)</li>
                            <li>ì„±ì¥ ë§ˆì¸ë“œì…‹ì„ ê°€ì§„ ë¡¤ëª¨ë¸ ì°¾ê¸°</li>
                            <li>ì‘ì€ í•™ìŠµ ëª©í‘œ ì„¤ì •í•˜ê³  ë‹¬ì„±í•˜ê¸°</li>
                        </ul>
                    </div>
                `;
            }

            // ê°œì¸ ê²°ê³¼ í‘œì‹œ
            document.getElementById('resultScore').textContent = `${totalScore}/${maxScore}ì  (${percentage}%)`;
            document.getElementById('resultCategory').textContent = category;
            document.getElementById('resultDescription').innerHTML = description;

            // ì „ì²´ ì§‘ê³„ ê²°ê³¼ í‘œì‹œ
            showAggregateResults();
        }

        // ì „ì²´ ì§‘ê³„ ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
        function showAggregateResults() {
            if (allResults.length === 0) {
                document.getElementById('totalParticipants').textContent = '0';
                document.getElementById('averageScore').textContent = '0.0%';
                if (document.getElementById('distributionBars')) document.getElementById('distributionBars').innerHTML = '';
                return;
            }
            const totalParticipants = allResults.length;
            const averageScore = allResults.reduce((sum, result) => sum + result.percentage, 0) / totalParticipants;
            document.getElementById('totalParticipants').textContent = totalParticipants;
            document.getElementById('averageScore').textContent = averageScore.toFixed(1) + '%';
            createDistributionChart('distributionBars', allResults);
        }

        // ìˆœìœ„ ê³„ì‚° í•¨ìˆ˜
        function calculateRank(userScore, allResults) {
            const userPercentage = Math.round((userScore / (questions.length * 2)) * 100);
            const higherScores = allResults.filter(result => result.percentage > userPercentage).length;
            return higherScores + 1;
        }

        // ë¶„í¬ ì°¨íŠ¸ ìƒì„± í•¨ìˆ˜
        function createDistributionChart(containerId, results) {
            const categories = [
                { name: 'ê°•í•œ ì„±ì¥', min: 75, max: 100, color: '#28a745' },
                { name: 'ì„±ì¥ ê²½í–¥', min: 50, max: 74, color: '#17a2b8' },
                { name: 'í˜¼í•©í˜•', min: 25, max: 49, color: '#ffc107' },
                { name: 'ê³ ì • ê²½í–¥', min: 0, max: 24, color: '#dc3545' }
            ];

            const distribution = categories.map(cat => {
                const count = results.filter(r => r.percentage >= cat.min && r.percentage <= cat.max).length;
                return { ...cat, count, percentage: results.length > 0 ? (count / results.length) * 100 : 0 };
            });

            const container = document.getElementById(containerId);
            container.innerHTML = '';

            distribution.forEach(item => {
                const barContainer = document.createElement('div');
                barContainer.className = 'chart-bar';

                const label = document.createElement('div');
                label.className = 'chart-label';
                label.textContent = item.name;

                const barFill = document.createElement('div');
                barFill.className = 'chart-bar-fill';
                barFill.style.width = `${item.percentage}%`;
                barFill.style.background = item.color;

                const value = document.createElement('div');
                value.className = 'chart-value';
                value.textContent = `${item.count}ëª…`;

                barContainer.appendChild(label);
                barContainer.appendChild(barFill);
                barContainer.appendChild(value);
                container.appendChild(barContainer);
            });
        }

        // ê°•ì‚¬ìš© ëª¨ë‹¬ í† ê¸€ í•¨ìˆ˜
        function toggleInstructorModal() {
            const modal = document.getElementById('instructorModal');
            if (modal.style.display === 'block') {
                modal.style.display = 'none';
            } else {
                modal.style.display = 'block';
                updateInstructorDashboard();
            }
        }

        // ê°•ì‚¬ìš© ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸
        function updateInstructorDashboard() {
            if (allResults.length === 0) {
                document.getElementById('modalTotalParticipants').textContent = '0';
                document.getElementById('modalAverageScore').textContent = '0.0%';
                document.getElementById('modalHighestScore').textContent = '0%';
                document.getElementById('modalLowestScore').textContent = '0%';
                if (document.getElementById('modalDistributionBars')) document.getElementById('modalDistributionBars').innerHTML = '';
                if (document.getElementById('participantResults')) document.getElementById('participantResults').innerHTML = '';
                return;
            }
            const totalParticipants = allResults.length;
            const averageScore = allResults.reduce((sum, result) => sum + result.percentage, 0) / totalParticipants;
            const highestScore = Math.max(...allResults.map(r => r.percentage));
            const lowestScore = Math.min(...allResults.map(r => r.percentage));
            document.getElementById('modalTotalParticipants').textContent = totalParticipants;
            document.getElementById('modalAverageScore').textContent = averageScore.toFixed(1) + '%';
            document.getElementById('modalHighestScore').textContent = highestScore + '%';
            document.getElementById('modalLowestScore').textContent = lowestScore + '%';
            createDistributionChart('modalDistributionBars', allResults);
            updateParticipantList();
        }

        // ì°¸ê°€ì ëª©ë¡ ì—…ë°ì´íŠ¸
        function updateParticipantList() {
            const container = document.getElementById('participantResults');
            container.innerHTML = '';

            // ì ìˆ˜ ìˆœìœ¼ë¡œ ì •ë ¬
            const sortedResults = [...allResults].sort((a, b) => b.percentage - a.percentage);

            sortedResults.forEach((result, index) => {
                const item = document.createElement('div');
                item.className = 'participant-item';

                const nameDiv = document.createElement('div');
                nameDiv.className = 'participant-name';
                nameDiv.textContent = `${index + 1}. ${result.name}`;

                const scoreDiv = document.createElement('div');
                scoreDiv.innerHTML = `
                    <span class="participant-score">${result.percentage}%</span>
                    <div class="participant-level">${getCategoryByScore(result.percentage)}</div>
                `;

                item.appendChild(nameDiv);
                item.appendChild(scoreDiv);
                container.appendChild(item);
            });
        }

        // ì ìˆ˜ì— ë”°ë¥¸ ì¹´í…Œê³ ë¦¬ ë°˜í™˜
        function getCategoryByScore(percentage) {
            if (percentage >= 75) return 'ê°•í•œ ì„±ì¥ ë§ˆì¸ë“œì…‹';
            if (percentage >= 50) return 'ì„±ì¥ ë§ˆì¸ë“œì…‹ ê²½í–¥';
            if (percentage >= 25) return 'í˜¼í•©í˜• ë§ˆì¸ë“œì…‹';
            return 'ê³ ì • ë§ˆì¸ë“œì…‹ ê²½í–¥';
        }

        // ê²°ê³¼ ë‚´ë³´ë‚´ê¸° í•¨ìˆ˜
        function exportResults() {
            const csvContent = generateCSV(allResults);
            downloadCSV(csvContent, 'mindset_survey_results.csv');
        }

        // CSV ìƒì„± í•¨ìˆ˜
        function generateCSV(results) {
            const headers = ['ìˆœìœ„', 'ì´ë¦„', 'ì ìˆ˜', 'ë°±ë¶„ìœ¨', 'ì¹´í…Œê³ ë¦¬', 'ì™„ë£Œì‹œê°„'];
            const sortedResults = [...results].sort((a, b) => b.percentage - a.percentage);
            
            let csvContent = headers.join(',') + '\n';
            
            sortedResults.forEach((result, index) => {
                const row = [
                    index + 1,
                    `"${result.name}"`,
                    `${result.score}/${result.maxScore}`,
                    `${result.percentage}%`,
                    `"${getCategoryByScore(result.percentage)}"`,
                    new Date(result.timestamp).toLocaleString()
                ];
                csvContent += row.join(',') + '\n';
            });
            
            return csvContent;
        }

        // CSV ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜
        function downloadCSV(csvContent, filename) {
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // ëª¨ë“  ë°ì´í„° ì‚­ì œ í•¨ìˆ˜
        function clearAllData() {
            if (confirm('ëª¨ë“  ì„¤ë¬¸ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                localStorage.removeItem('surveyResults');
                allResults = [];
                // ê°•ì‚¬ìš© ëŒ€ì‹œë³´ë“œ, ê²°ê³¼ í™”ë©´ ëª¨ë‘ ì¦‰ì‹œ 0ìœ¼ë¡œ ê°±ì‹ 
                updateInstructorDashboard();
                showAggregateResults();
                // ê²°ê³¼ í™”ë©´ì˜ ê°œë³„ ê²°ê³¼, ë¶„í¬, ì ìˆ˜ ë“±ë„ ì¦‰ì‹œ ì´ˆê¸°í™”
                if (document.getElementById('resultScore')) document.getElementById('resultScore').textContent = '-';
                if (document.getElementById('resultCategory')) document.getElementById('resultCategory').textContent = '';
                if (document.getElementById('resultDescription')) document.getElementById('resultDescription').innerHTML = '';
                if (document.getElementById('distributionBars')) document.getElementById('distributionBars').innerHTML = '';
                if (document.getElementById('totalParticipants')) document.getElementById('totalParticipants').textContent = '0';
                if (document.getElementById('averageScore')) document.getElementById('averageScore').textContent = '0.0%';
                alert('ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ì„¤ë¬¸ ì¬ì‹œì‘ í•¨ìˆ˜
        function restartSurvey() {
            document.getElementById('resultContainer').style.display = 'none';
            document.getElementById('welcomeScreen').style.display = 'block';
            // ê°•ì‚¬ìš© ë²„íŠ¼ ë‹¤ì‹œ ë³´ì´ê¸°
            document.getElementById('instructorPanel').style.display = 'block';
            currentQuestion = 0;
            answers = [];
            totalScore = 0;
            document.getElementById('participantName').value = '';
        }
    </script>
</body>
</html>